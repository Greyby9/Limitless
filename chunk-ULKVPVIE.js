import{k as Pe}from"./chunk-YQQCHXAJ.js";import{Ca as ge,E as ae,Ea as M,F as ce,Fa as he,G as ue,Ga as ve,H as le,Ha as Se,Ia as xe,Ja as y,K as P,Ka as g,La as T,Ma as je,Na as Ce,Oa as J,P as l,Pa as C,Qa as K,R as L,Ra as we,Sa as q,W as pe,X as D,Z as de,_ as fe,a as te,ab as U,ba as me,bb as _,c as oe,cb as k,da as h,ea as v,f as F,h as ne,ja as be,k as re,m as x,o as G,qa as ye,ta as j,u as ie,x as se,ya as O}from"./chunk-GAF4URQL.js";import{a as S}from"./chunk-2VMXMS7J.js";function I(e){e||(D(I),e=l(v));let t=new oe(o=>e.onDestroy(o.next.bind(o)));return o=>o.pipe(le(t))}function R(e,t){!t?.injector&&D(R);let o=t?.injector??l(h),n=new ne(1),r=k(()=>{let p;try{p=e()}catch(b){_(()=>n.error(b));return}_(()=>n.next(p))},{injector:o,manualCleanup:!0});return o.get(v).onDestroy(()=>{r.destroy(),n.complete()}),n.asObservable()}function Q(e,t,o){!t&&D(e);let n=t??l(h);return o?pe(n,o):n}function w(e,...t){let[o,n,r,p,b]=Re(t);if(o){let c=null;return r instanceof v?c=r:c=Q(w,r).get(v),o.pipe(I(c)).subscribe(s=>{let d=()=>{e.update(i=>{if(!N(i))return n?.(i,s)||s;if(!N(s)){let f=n?n(i,s):s;return N(f)?S(S({},i),f):f}return S(S({},i),n?.(i,s)||s)})};p?_(d):d()})}if(b){let c=r instanceof h?Q(w,r):void 0;return k(()=>{e.update(s=>N(s)?S(S({},s),b()):b())},{allowSignalWrites:!0,injector:c})}return{with(...c){if(!this.subscription)this.subscription=new te;else if(this.subscription.closed)return console.info("[ngxtension connect] ConnectedSignal has been closed."),this;return this.subscription.add(w(e,...c,r,p)),this},subscription:null}}function Re(e){return e.length>3?[e[0],e[1],e[2],e[3],null]:e.length===3?typeof e[2]=="boolean"?x(e[0])?[e[0],null,e[1],e[2],null]:[null,null,e[1],e[2],e[0]]:[e[0],e[1],e[2],!1,null]:e.length===2?typeof e[1]=="boolean"?[null,null,e[0],e[1],null]:typeof e[1]=="function"?[e[0],e[1],null,!1,null]:[e[0],null,e[1],!1,null]:x(e[0])?[e[0],null,null,!1,null]:typeof e[0]=="function"?[null,null,null,!1,e[0]]:[null,null,e[0],!1,null]}function N(e){return typeof e=="object"&&e!==void 0&&e!==null&&!Array.isArray(e)}function ke(){let e=O(0);return{notify:()=>{e.update(t=>(t>>>0)+1)},listen:e.asReadonly()}}function Oe(e){let t=l(v),o=l(h),{initialState:n,sources:r=[],lazySources:p=[],actionSources:b={},selectors:c=()=>({}),effects:s=()=>({})}=e,d=O(n),i=d.asReadonly(),f=R(d),Y=!1,V=[],E=i;for(let[a,u]of Object.entries(b))if(x(u))De(i,f,a,t,u,V);else{let m=new F,ee=u(i,m).pipe(ae());w(d,ee),De(i,f,a,t,m,V,ee)}for(let a in n){let u=U(()=>i()[a]);Object.defineProperty(i,a,{value:u}),i[`${a}$`]=R(u)}for(let[a,u]of Object.entries(c(E))){let m=U(u);Object.defineProperty(i,a,{value:m}),i[`${a}$`]=R(m)}for(let[a,u]of Object.entries(s(E)))console.warn("The 'effects' configuration in signalSlice is deprecated. Please use standard signal effects outside of signalSlice instead."),Object.defineProperty(E,a,{value:k(m=>{let W=u();W&&m(()=>W())})});Ie(d,r,i),t.onDestroy(()=>{V.forEach(a=>a.complete())});let Z=()=>{Y||(Y=!0,Ie(d,p,i,o,!0))};return new Proxy(E,{get(a,u,m){return Z(),Reflect.get(a,u,m)},apply(a,u,m){return Z(),Reflect.apply(a,u,m)}})}function Ie(e,t,o,n,r=!1){for(let p of t)x(p)?w(e,p,n,r):w(e,p(o),n,r)}function De(e,t,o,n,r,p,b){let c=ke();Object.defineProperties(e,{[o]:{value:s=>x(s)?new Promise((d,i)=>{s.pipe(I(n)).subscribe({next:f=>{c.notify(),r.next(f)},error:f=>{r.error(f),i(f)},complete:()=>{c.notify(),r.complete(),d(e())}})}):(b&&b.pipe(I(n)).subscribe(),new Promise(d=>{t.pipe(se(1)).subscribe(i=>{d(i)}),c.notify(),r.next(s)}))},[`${o}$`]:{value:r.asObservable()},[`${o}Updated`]:{value:c.listen}}),p.push(r)}var _e={API_URL:"https://fakestoreapi.com"};var z=class e{http=l(Pe);apiUrl=_e.API_URL;static \u0275fac=function(o){return new(o||e)};static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})};var B=class e extends z{getProduto(t){return this.http.get(`${this.apiUrl}/products`,{params:{limit:t*5}})}static \u0275fac=(()=>{let t;return function(n){return(t||(t=me(e)))(n||e)}})();static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})};var $=class e{produtoService=l(B);initialState={produtos:[],estado:"loading",pagina:1};trocarPage$=new F;cargarProduto$=this.trocarPage$.pipe(ce(1),ue(t=>this.produtoService.getProduto(t)),G(t=>({produtos:t,estado:"success"})),ie(()=>re({produtos:[],status:"error"})));state=Oe({initialState:this.initialState,sources:[this.trocarPage$.pipe(G(t=>({pagina:t,estado:"loading"}))),this.cargarProduto$]});static \u0275fac=function(o){return new(o||e)};static \u0275prov=P({token:e,factory:e.\u0275fac})};var H=class e{produto=be.required();static \u0275fac=function(o){return new(o||e)};static \u0275cmp=L({type:e,selectors:[["app-produto-cartao"]],inputs:{produto:[1,"produto"]},standalone:!0,features:[q],decls:9,vars:3,consts:[[1,"max-w-sm","bg-white","border","border-gray-200","rounded-lg","shadow","dark:bg-gray-800","dark:border-gray-700"],["href","#"],["alt","",1,"rounded-t-lg","h-60","w-full","object-contain","object-center",3,"src"],[1,"p-5"],[1,"mb-2","text-2xl","font-bold","tracking-tight","text-gray-900","dark:text-white","line-clamp-1"],[1,"mb-3","font-normal","text-gray-700","dark:text-gray-400","line-clamp-3"]],template:function(o,n){o&1&&(y(0,"div",0)(1,"picture",1),T(2,"img",2),g(),y(3,"div",3)(4,"a",1)(5,"h5",4),C(6),g()(),y(7,"p",5),C(8),g()()()),o&2&&(j(2),M("src",n.produto().image,ye),j(4),K(n.produto().title),j(2),K(n.produto().description))}})};function Ee(e,t){e&1&&(y(0,"p"),C(1,"Loading..."),g())}function Fe(e,t){e&1&&(y(0,"p"),C(1,"Error"),g())}function Le(e,t){if(e&1&&T(0,"app-produto-cartao",4),e&2){let o=t.$implicit;M("produto",o)}}function Me(e,t){if(e&1){let o=je();y(0,"div",1)(1,"button",2),Ce("click",function(){de(o);let r=J();return fe(r.trocarPage())}),C(2,"Cambiar Pagina"),g()(),y(3,"div",3),Se(4,Le,1,1,"app-produto-cartao",4,ve),g()}if(e&2){let o=J();j(4),xe(o.productsState.state().produtos)}}var X=class e{productsState=l($);trocarPage(){let t=this.productsState.state.pagina()+1;this.productsState.trocarPage$.next(t),console.log("sirve")}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=L({type:e,selectors:[["app-produto-lista"]],standalone:!0,features:[we([$]),q],decls:4,vars:1,consts:[[1,"mx-auto","max-w-screen-xl"],[1,"flex","justify-end","my-6"],["type","button",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","dark:bg-green-600","dark:hover:bg-green-700","focus:outline-none","dark:focus:ring-blue-800",3,"click"],[1,"grid","grid-cols-[repeat(4,300px)]","gap-6"],[1,"block",3,"produto"]],template:function(o,n){if(o&1&&(y(0,"div",0),ge(1,Ee,2,0,"p")(2,Fe,2,0,"p")(3,Me,6,0),g()),o&2){let r;j(),he((r=n.productsState.state.estado())==="loading"?1:r==="error"?2:3)}},dependencies:[H]})};export{X as default};
